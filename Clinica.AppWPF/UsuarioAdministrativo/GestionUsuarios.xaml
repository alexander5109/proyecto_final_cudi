<Window
	x:Class="Clinica.AppWPF.UsuarioAdministrativo.GestionUsuarios"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:local="clr-namespace:Clinica.AppWPF.UsuarioAdministrativo"
	Title="Clinica Medica - Usuarios"
	Height="600"
	Width="1024"
	Icon="pack://application:,,,/PublishedResources/icons/icono.png"
	WindowStartupLocation="CenterScreen">
	<Window.Background>
		<ImageBrush
			ImageSource="pack://application:,,,/PublishedResources/images2025sol/FondoMedicosLila.jpeg" />
	</Window.Background>
	<!-- ===================== LAYOUT GENERAL ===================== -->
	<Grid
		Margin="15,15,15,15">
		<Grid.RowDefinitions>
			<RowDefinition
				Height="Auto" />
			<!-- Título -->
			<RowDefinition
				Height="*" />
			<!-- Contenido -->
			<RowDefinition
				Height="Auto" />
			<!-- Botones inferiores -->
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition
				Width="*" />
			<!-- Búsqueda + lista -->
			<ColumnDefinition
				Width="350" />
			<!-- Estado del turno -->
		</Grid.ColumnDefinitions>
		<Label
			Grid.Column="0"
			Grid.Row="0"
			Grid.ColumnSpan="1"
			Content="Gestión de usuarios"
			FontSize="55"
			FontFamily="Segoe UI Historic"
			Style="{StaticResource LabelLindoConPiu}"
			HorizontalContentAlignment="Center"
			VerticalContentAlignment="Center"
			VerticalAlignment="Center"
			Margin="55,0,55,0"
			FontWeight="Bold" />
		<StackPanel
			Grid.Row="2"
			Orientation="Horizontal"
			HorizontalAlignment="Left"
			Margin="15,15,15,15"
			Width="380"
			VerticalAlignment="Bottom">
			<Button
				Content="Home"
				Width="170"
				Height="37"
				Margin="10,0,10,10"
				Click="ButtonHome"
				FontSize="20"
				Style="{StaticResource BotonRedondeadoVioletaAzul}" />
			<Button
				Content="Salir"
				Width="170"
				Height="37"
				Margin="10,0,10,10"
				Click="ClickBoton_Salir"
				FontSize="20"
				Style="{StaticResource BotonRedondeadoVioletaAzul}" />
		</StackPanel>
		<Grid
			Grid.Column="0"
			Grid.Row="1"
			Margin="10,15,10,15">
			<Grid.RowDefinitions>
				<RowDefinition
					Height="Auto" />
				<!-- Título -->
				<RowDefinition
					Height="Auto" />
				<!-- Subtítulo -->
				<RowDefinition
					Height="Auto" />
				<!-- Filtro -->
				<RowDefinition
					Height="*" />
				<!-- LISTVIEW -->
				<RowDefinition
					Height="Auto" />
				<!-- Botones -->
			</Grid.RowDefinitions>
			<Label
				Grid.Row="0"
				Content="Cuentas"
				FontSize="25"
				Style="{StaticResource LabelLindoConTextoSombra}"
				HorizontalAlignment="Center"
				FontWeight="Bold" />
			<Label
				Grid.Row="1"
				Content="Filtrar por Nombre, Apellido o Rol"
				FontFamily="Palatino Linotype"
				FontWeight="Bold"
				HorizontalAlignment="Center"
				Margin="10,10,10,0" />
			<TextBox
				Grid.Row="2"
				Text="{Binding FiltroUsuariosTexto, UpdateSourceTrigger=PropertyChanged}"
				Width="200"
				HorizontalAlignment="Center"
				Margin="10,0,10,10" />
			<ListView
				Grid.Row="3"
				ItemsSource="{Binding UsuariosList}"
				SelectedItem="{Binding SelectedUsuario}"
				Margin="10"
				ScrollViewer.VerticalScrollBarVisibility="Auto">
				<!-- GridView igual que ahora -->
				<ListView.View>
					<GridView>
						<GridViewColumn
							Header="Rol"
							Width="140"
							DisplayMemberBinding="{Binding EnumRole}" />
						<GridViewColumn
							Header="Username"
							Width="80"
							DisplayMemberBinding="{Binding UserName}" />
						<GridViewColumn
							Header="Nombre"
							Width="80"
							DisplayMemberBinding="{Binding Nombre}" />
						<GridViewColumn
							Header="Apellido"
							Width="100"
							DisplayMemberBinding="{Binding Apellido}" />
						<GridViewColumn
							Header="Email"
							Width="100"
							DisplayMemberBinding="{Binding Email}" />
						<GridViewColumn
							Header="Telefono"
							Width="90"
							DisplayMemberBinding="{Binding Telefono}" />
					</GridView>
				</ListView.View>
			</ListView>
			<StackPanel
				Grid.Row="4"
				Orientation="Horizontal"
				HorizontalAlignment="Center">
				<Button
					Content=" ➕ Nuevo Usuario"
					Width="166"
					Height="30"
					Click="ButtonAgregarUsuario"
					Style="{StaticResource BotonRedondeadoVioletaAzul}"
					Margin="7" />
				<Button
					Content="✏ Editar Datos"
					Width="155"
					Height="30"
					IsEnabled="{Binding HayUsuarioSeleccionado}"
					Click="ClickBoton_ModificarUsuario"
					Style="{StaticResource BotonRedondeadoVioletaAzul}"
					Margin="7" />
			</StackPanel>
		</Grid>
		<Grid
			Grid.Column="1"
			Grid.Row="0"
			Grid.RowSpan="3"
			Margin="15,35,15,35">
			<Grid.RowDefinitions>
				<RowDefinition
					Height="Auto" />
				<!-- Título -->
				<RowDefinition
					Height="Auto" />
				<!-- Subtítulo -->
				<RowDefinition
					Height="*" />
				<!-- LISTVIEW -->
				<RowDefinition
					Height="Auto" />
				<!-- Botón -->
			</Grid.RowDefinitions>
			<Label
				Grid.Row="0"
				Content="Permisos de rol"
				FontSize="25"
				Style="{StaticResource LabelLindoConTextoSombra}"
				HorizontalAlignment="Center"
				FontWeight="Bold" />
			<ListView
				Grid.Row="2"
				Margin="10"
				ItemsSource="{Binding RolesViewModelList}">
				<ListView.View>
					<GridView>
						<!--<GridViewColumn
							Header="Rol"
							Width="95"
							DisplayMemberBinding="{Binding Rol}" />-->
						<GridViewColumn
							Header="Accion"
							Width="180"
							DisplayMemberBinding="{Binding Accion}" />
						<GridViewColumn
							Header="Tiene Permiso"
							Width="85"
							DisplayMemberBinding="{Binding TienePermiso}" />
					</GridView>
				</ListView.View>
			</ListView>
		</Grid>
	</Grid>
</Window>
