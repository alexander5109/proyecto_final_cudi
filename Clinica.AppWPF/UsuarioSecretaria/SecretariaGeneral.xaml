<Window
	x:Class="Clinica.AppWPF.UsuarioSecretaria.SecretariaGeneral"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d"
	Title="Clinica Medica – Gestión Integral"
	Height="900"
	Width="1400"
	WindowStartupLocation="CenterScreen"
	Icon="pack://application:,,,/PublishedResources/icons/icono.png">
	<Window.Background>
		<ImageBrush
			ImageSource="pack://application:,,,/PublishedResources/images/otroFondo.png" />
	</Window.Background>
	<Grid
		Margin="20">
		<!-- ===========================
         SECCIÓN IZQUIERDA: BUSQUEDA
         =========================== -->
		<ContentControl
			Style="{StaticResource ContentControlLindo}"
			Margin="10,10,0,422"
			HorizontalAlignment="Left"
			Width="336">
			<StackPanel
				Margin="15">
				<Label
					Content="Buscar paciente"
					FontFamily="Ringbearer"
					FontSize="30"
					FontWeight="Bold"
					HorizontalAlignment="Center" />
				<!-- FILTROS -->
				<StackPanel
					Orientation="Vertical"
					Margin="5">
					<StackPanel />
					<StackPanel>
						<Label
							Content="Filtrar por Nombre, Apellido o Dni:"
							FontFamily="Palatino Linotype"
							FontWeight="Bold" />
						<TextBox
							Text="{Binding FiltroPacientesTexto, UpdateSourceTrigger=PropertyChanged}" />
					</StackPanel>
					<!-- <StackPanel>
						<Label
							Content="Filtrar por Email:"
							FontFamily="Palatino Linotype"
							FontWeight="Bold" />
						<TextBox
							x:Name="txtFilterEmail"
							TextChanged="FilterTextChanged" />
					</StackPanel>
					<StackPanel>
						<Label
							Content="Filtrar por Telefono:"
							FontFamily="Palatino Linotype"
							FontWeight="Bold" />
						<TextBox
							x:Name="txtFilterTelefono"
							TextChanged="FilterTextChanged" />
					</StackPanel> -->
				</StackPanel>
				<!-- LISTA DE PACIENTES -->
				<ListView
					ItemsSource="{Binding PacientesList}"
					SelectedItem="{Binding SelectedPaciente}"
					Margin="0,10"
					Height="172">
					<ListView.View>
						<GridView>
							<GridViewColumn
								Header="DNI"
								DisplayMemberBinding="{Binding Dni}"
								Width="80" />
							<GridViewColumn
								Header="Nombre"
								DisplayMemberBinding="{Binding Nombre}"
								Width="100" />
							<GridViewColumn
								Header="Apellido"
								DisplayMemberBinding="{Binding Apellido}"
								Width="100" />
						</GridView>
					</ListView.View>
				</ListView>
				<!-- BOTONES PACIENTE -->
				<StackPanel
					Orientation="Horizontal"
					HorizontalAlignment="Center"
					Margin="0,10">
					<Button
						Content="Agregar Paciente"
						Width="133"
						Margin="5"
						FontSize="17"
						FontWeight="DemiBold"
						FontFamily="Baskerville Old Face"
						Height="35"
						Style="{StaticResource BotonRedondeado}"
						Click="ButtonAgregarPaciente" />
					<Button
						Content="Modificar"
						Command="{Binding ModificarPacienteCommand}"
						IsEnabled="{Binding PuedeModificarPaciente}"
						Width="133"
						Height="35"
						FontSize="17"
						FontWeight="DemiBold"
						FontFamily="Baskerville Old Face"
						Margin="5"
						Style="{StaticResource BotonRedondeado}"
						Click="ButtonModificarPaciente" />
				</StackPanel>
			</StackPanel>
		</ContentControl>
		<!-- ===========================
         PANEL CENTRAL: TURNOS
         =========================== -->
		<StackPanel
			HorizontalAlignment="Left"
			VerticalAlignment="Top"
			Margin="31,676,0,0">
			<Button
				Content="Home"
				HorizontalAlignment="Left"
				VerticalAlignment="Top"
				Height="37"
				Width="170"
				Margin="15"
				Click="ButtonHome"
				FontSize="20"
				Style="{StaticResource BotonRedondeado}"
				FontWeight="Bold"
				BorderBrush="#FF0E0D0D"
				FontFamily="Baskerville Old Face" />
			<Button
				Content="Salir"
				HorizontalAlignment="Left"
				VerticalAlignment="Top"
				Height="37"
				Width="170"
				Margin="15"
				Click="ButtonSalir"
				FontSize="20"
				Style="{StaticResource BotonRedondeado}"
				FontWeight="Bold"
				BorderBrush="#FF0E0D0D"
				FontFamily="Baskerville Old Face" />
		</StackPanel>
		<ContentControl
			Style="{StaticResource ContentControlLindo}"
			Margin="391,10,349,185">
			<StackPanel
				Orientation="Vertical"
				Margin="15">
				<Label
					Content="Turnos"
					FontSize="55"
					FontFamily="Ringbearer"
					FontWeight="Bold"
					HorizontalAlignment="Center" />
				<StackPanel
					Margin="10"
					Orientation="Horizontal"
					HorizontalAlignment="Center"
					VerticalAlignment="Center">
					<StackPanel>
						<Label
							Content="Filtrar por fecha:"
							Margin="0,5,0,3"
							FontFamily="Palatino Linotype"
							FontWeight="Bold"
							HorizontalAlignment="Center" />
						<DatePicker
							SelectedDate="{Binding FiltroFecha}"
							Margin="0,0,0,10"
							HorizontalAlignment="Center" />
					</StackPanel>
					<StackPanel>
						<Label
							Content="Filtrar por Estado:"
							Margin="0,5,0,3"
							FontFamily="Palatino Linotype"
							FontWeight="Bold"
							HorizontalAlignment="Center" />
						<ComboBox
							ItemsSource="{Binding Estados}"
							SelectedItem="{Binding EstadoSeleccionado}"
							Width="200"
							HorizontalAlignment="Center" />
					</StackPanel>
					<StackPanel>
						<Label
							Content="Filtrar por Especialidad:"
							Margin="0,5,0,3"
							FontFamily="Palatino Linotype"
							FontWeight="Bold"
							HorizontalAlignment="Center" />
						<ComboBox
							ItemsSource="{Binding Especialidades}"
							SelectedItem="{Binding EspecialidadSeleccionada}"
							Width="200"
							HorizontalAlignment="Center" />
					</StackPanel>
				</StackPanel>
				<StackPanel
					Margin="10"
					Orientation="Horizontal"
					HorizontalAlignment="Center"
					VerticalAlignment="Center">
					<StackPanel>
						<Label
							Content="Filtrar por paciente:"
							Margin="0,5,0,3"
							FontFamily="Palatino Linotype"
							FontWeight="Bold"
							HorizontalAlignment="Center" />
						<TextBox
							Text="{Binding FiltroTurnosPaciente, UpdateSourceTrigger=PropertyChanged}" />
					</StackPanel>
					<StackPanel>
						<Label
							Content="Filtrar por Dia Semana:"
							Margin="0,5,0,3"
							FontFamily="Palatino Linotype"
							FontWeight="Bold"
							HorizontalAlignment="Center" />
						<ComboBox
							ItemsSource="{Binding DiasSemana}"
							SelectedItem="{Binding DiaSemanaSeleccionado}"
							Width="200"
							HorizontalAlignment="Center" />
					</StackPanel>
					<StackPanel>
						<Label
							Content="Filtrar por Medico:"
							Margin="0,5,0,3"
							FontFamily="Palatino Linotype"
							FontWeight="Bold"
							HorizontalAlignment="Center" />
						<TextBox
							Text="{Binding FiltroTurnosMedico, UpdateSourceTrigger=PropertyChanged}" />
					</StackPanel>
				</StackPanel>
				<ListView
					x:Name="turnosListView"
					ItemsSource="{Binding TurnosList}"
					SelectedItem="{Binding SelectedTurno}"
					Height="272">
					<ListView.View>
						<GridView>
							<GridViewColumn
								Header="Fecha"
								Width="120">
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock
											Text="{Binding FechaAsignada, StringFormat={}{0:dd/MM/yyyy}}" />
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>
							<GridViewColumn
								Header="Hora"
								Width="60">
								<GridViewColumn.CellTemplate>
									<DataTemplate>
										<TextBlock
											Text="{Binding Hora, StringFormat={}{0:hh\\:mm}}" />
									</DataTemplate>
								</GridViewColumn.CellTemplate>
							</GridViewColumn>
							<GridViewColumn
								Header="Paciente"
								Width="120"
								DisplayMemberBinding="{Binding PacienteDisplayear}" />
							<GridViewColumn
								Header="Especialidad"
								Width="80"
								DisplayMemberBinding="{Binding EspecialidadCode}" />
							<GridViewColumn
								Header="DNI"
								Width="80"
								DisplayMemberBinding="{Binding PacienteDni}" />
							<GridViewColumn
								Header="Médico"
								Width="120"
								DisplayMemberBinding="{Binding MedicoDisplayear}" />
							<GridViewColumn
								Header="Estado"
								Width="80"
								DisplayMemberBinding="{Binding OutcomeEstado}" />
						</GridView>
					</ListView.View>
				</ListView>
			</StackPanel>
		</ContentControl>
		<!-- ===========================
         PANEL DERECHO: INFO + ACCIONES
         =========================== -->
		<ContentControl
			Style="{StaticResource ContentControlLindo}"
			HorizontalAlignment="Left"
			Margin="1058,10,0,422"
			Width="270">
			<StackPanel
				Margin="15">
				<!-- INFO DEL PACIENTE -->
				<Label
					Content="Paciente"
					FontFamily="Ringbearer"
					FontSize="44"
					FontWeight="Bold"
					HorizontalAlignment="Center" />
				<TextBlock
					Text="DNI:"
					FontWeight="Bold" />
				<TextBlock
					Text="{Binding SelectedPaciente.Dni}"
					Margin="0,0,0,10" />
				<TextBlock
					Text="Nombre:"
					FontWeight="Bold" />
				<TextBlock
					Text="{Binding SelectedPaciente.Nombre}"
					Margin="0,0,0,10" />
				<TextBlock
					Text="Apellido:"
					FontWeight="Bold" />
				<TextBlock
					Text="{Binding SelectedPaciente.Apellido}"
					Margin="0,0,0,10" />
				<TextBlock
					Text="Correo:"
					FontWeight="Bold" />
				<TextBlock
					Text="{Binding SelectedPaciente.Email}"
					Margin="0,0,0,10" />
				<TextBlock
					Text="Teléfono:"
					FontWeight="Bold" />
				<TextBlock
					Text="{Binding SelectedPaciente.Telefono}"
					Margin="0,0,0,10" />
				<!-- BOTÓN NUEVO TURNO -->
				<Button
					x:Name="buttonReservarTurno"
					Content="Nueva Reserva de Turno"
					IsEnabled="{Binding PuedeReservarTurno}"
					Command="{Binding ReservarTurnoCommand}"
					Margin="10"
					FontSize="17"
					Height="35"
					FontWeight="DemiBold"
					FontFamily="Baskerville Old Face"
					Width="190"
					Style="{StaticResource BotonRedondeado}"
					Click="ButtonReservarTurno" />
			</StackPanel>
		</ContentControl>
		<ContentControl
			Style="{StaticResource ContentControlLindo}"
			HorizontalAlignment="Left"
			VerticalAlignment="Top"
			Margin="1058,454,0,0"
			Width="270"
			Height="356">
			<StackPanel
				Margin="10">
				<Label
					Content="Estado de turno"
					FontFamily="Ringbearer"
					FontSize="25"
					FontWeight="Bold"
					HorizontalAlignment="Center" />
				<!-- ESTADO DEL TURNO -->
				<Label
					Content="Comentario:"
					FontFamily="Palatino Linotype"
					FontWeight="Bold"
					Margin="0,10,0,0" />
				<TextBox
					x:Name="comentarioTextBox"
					TextWrapping="Wrap"
					Text="{Binding SelectedTurno.Comentario}"
					IsEnabled="{Binding HayTurnoSeleccionado}"
					Height="70"
					Width="250" />
				<StackPanel>
					<Button
						Content="Confirmar asistencia"
						Command="{Binding PostConfirmarAsistencia}"
						IsEnabled="{Binding HayTurnoSeleccionado}"
						Style="{StaticResource BotonRedondeado}"
						Width="150"
						FontSize="17"
						FontFamily="Baskerville Old Face"
						FontWeight="DemiBold"
						Height="30"
						Click="Button_ConfirmarTurnoAsistencia" />
					<Button
						Content="Marcar Ausente"
						Command="{Binding PostMarcarAusente}"
						IsEnabled="{Binding HayTurnoSeleccionado}"
						Style="{StaticResource BotonRedondeado}"
						Width="120"
						FontSize="17"
						FontFamily="Baskerville Old Face"
						FontWeight="DemiBold"
						Click="Button_MarcarTurnoAusente"
						Height="30" />
					<Button
						Content="Reprogramar Turno"
						Command="{Binding PostReprogramarTurno}"
						IsEnabled="{Binding HayTurnoSeleccionado}"
						Style="{StaticResource BotonRedondeado}"
						Width="150"
						FontSize="17"
						FontFamily="Baskerville Old Face"
						FontWeight="DemiBold"
						Click="Button_ReprogramarTurno"
						Height="30" />
					<Button
						Content="Cancelar Turno"
						Command="{Binding PostCancelarTurno}"
						IsEnabled="{Binding HayTurnoSeleccionado}"
						Style="{StaticResource BotonRedondeado}"
						Width="120"
						FontSize="17"
						FontFamily="Baskerville Old Face"
						FontWeight="DemiBold"
						Click="Button_CancelarTurno"
						Height="30" />
				</StackPanel>
			</StackPanel>
		</ContentControl>
	</Grid>
</Window>
